---
layout: post
title: "250704_TIL"
date: 2025-07-04 16:00:00 +0900
categories: [SQL, TIL]
tags: [SQL, WHERE절, CASE문, GROUP BY, 집계함수]
---

<style>
  .initial-content, .search-content {
      padding-left: 40px;
      padding-right: 40px;
  }
</style>

<h2>📘 250704_TIL</h2>

---

<h3>1️⃣ WHERE 절</h3>

- ✅ **언제 사용?**
  - 테이블에서 **행(레코드)을 필터링**할 때 사용
  - 아직 그룹화나 집계가 일어나기 전 단계

- 🧠 **핵심 포인트**
  - 각 데이터 행 하나하나를 검사해서 조건에 맞는 행만 남김
  - **집계 함수(SUM, MAX 등)는 사용 불가**
    - 이유: WHERE은 **집계 전 단계**라서

---

<h3>2️⃣ CASE ... END AS</h3>

- ✅ **언제 사용?**
  - 조건문을 컬럼처럼 사용해서 **새로운 컬럼 생성**하거나
  - 기존 값을 변환할 때 사용
  - 주로 SELECT 절에서 활용

- 🧠 **핵심 포인트**
  - 한 행씩 처리하며 결과에 조건에 따른 **가공 컬럼**을 붙임
  - 집계 함수와 같이 사용 가능

---

<h3>3️⃣ GROUP BY</h3>

- ✅ **언제 사용?**
  - 같은 값끼리 그룹핑해서 집계(COUNT, SUM, MAX, AVG 등)를 할 때
  - 그룹별로 결과를 만들 때 사용

- 🧠 **핵심 포인트**
  - 집계 함수와 거의 항상 함께 사용됨
  - **그룹핑 후 조건**을 걸 때는 WHERE가 아니라 **HAVING 사용**

---

<h3>4️⃣ 핵심 비교 요약</h3>

| 구분          | 언제?                          | 특징                                  | 집계 함수 가능? |
|---------------|----------------------------------|---------------------------------------|-----------------|
| **WHERE**     | 테이블에서 행을 고를 때         | 집계 전 단계, 행 단위 필터링         | ❌ 불가능       |
| **CASE ... END** | 컬럼값을 조건에 따라 가공할 때 | 조건문 → 값 반환 → 컬럼처럼 사용     | ✅ 가능         |
| **GROUP BY**  | 그룹별로 묶어서 집계할 때        | 같은 값끼리 묶고 집계 함수 사용      | ✅ 가능         |

---

<h3>5️⃣ 추가 학습 포인트</h3>

- **WHERE vs HAVING**
  - WHERE → 그룹화 전 필터링
  - HAVING → 그룹화 후 집계된 데이터 필터링
- **GROUP BY 대상 선정**
  - 최종 집계 단위만 그룹핑
- **날짜 데이터 처리**
  - 문자열처럼 비교하면 오류 발생 → 포맷 변환 또는 날짜 함수 사용
